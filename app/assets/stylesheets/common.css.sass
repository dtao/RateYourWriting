@import 'bootstrap'
@import 'bootstrap-glyphicons'
@import 'variables'

@import url("http://fonts.googleapis.com/css?family=Lora|Oxygen|Raleway:300,400,700|Source+Code+Pro:400,700")

// This is from Bootstrap's website... because I like it.
$brand-contrast: #563d7c

@mixin fill-parent
  display: block
  position: absolute
  top: 0
  bottom: 0
  left: 0
  right: 0
  height: 100%
  width: 100%

@mixin translucent($opacity)
  opacity: $opacity
  filter: alpha(opacity=($opacity * 100))

@mixin backdrop($color, $opacity)
  z-index: 1

  &:before
    @include fill-parent
    @include translucent($opacity)

    display: block
    content: ''
    background-color: $color
    z-index: -1

@mixin span($columns)
  @extend .col-lg-#{$columns}, [class^="col-"]

@mixin border-box
  -moz-box-sizing: border-box
  box-sizing: border-box

h1, h2, h3, h4, h5, h6, th
  font-family: "Raleway", "Helvetica Neue", Helvetica, Arial, sans-serif

th
  font-weight: bold

h1, h2
  font-weight: 300

input[type="submit"], button, .btn
  font-family: "Oxygen", "Helvetica Neue", Helvetica, Arial, sans-serif

nav
  @extend .dropdown, .hidden-sm

  position: fixed
  top: 24px
  left: 40px
  width: 200px

  ul
    @extend .dropdown-menu

    display: block
    border: none
    border-right: 1px solid $hr-border
    box-shadow: none

    li
      font-family: "Oxygen", "Helvetica Neue", Helvetica, Arial, sans-serif

    li.header
      @extend .dropdown-header

    li.divider
      @extend .dropdown-divider

    li span.unread-count
      @extend .badge

main
  @extend .container

  @media all and (min-width: $screen-small)
    margin-left: 280px
    margin-right: 40px

  @media all and (max-width: $screen-small)
    padding-left: 15px
    padding-right: 15px

  padding-top: 24px
  padding-bottom: 64px

main > header
  margin-bottom: 10px
  padding-bottom: 10px
  border-bottom: 1px solid $hr-border

  p
    @extend .lead

  h1
    font-size: 48pt

    em:nth-child(odd)
      color: $brand-success
      font-style: normal

    em:nth-child(even)
      color: $brand-info
      font-style: normal

    em:first-child
      color: $brand-contrast
      font-style: normal

    aside
      @extend .label, .label-warning
      font-size: 40%

    a
      @extend .btn, .btn-small, .btn-default

footer
  padding: 0 1em

table
  @extend .table, .table-striped, .table-hover, .table-condensed

#notice
  @extend .alert

  &.success
    @extend .alert-success

  &.info
    @extend .alert-info

  &.warning
    @extend .alert-warning

  &.error
    @extend .alert-danger

  p:last-child
    margin-bottom: 0

blockquote#quote
  @extend .text-muted

  @media all and (min-width: $screen-small)
    width: 75%

  padding-top: 10px
  margin: 40px auto
  border-top: 1px solid $hr-border
  border-left: none
  text-align: center

  footer
    display: inline

    &:before
      content: "-"

aside.notes
  &:before
    content: "Notes:"
    display: block
    font-weight: bold

  p
    margin-bottom: 0

aside.kinds
  text-align: center

  span
    @extend small, .text-muted

    &:nth-child(n+2):before
      content: " | "

#news
  @extend .row

  #daily-news
    @include span(6)

  #site-news
    @include span(6)

a[class*="new-"]
  @extend .btn, .btn-info

form
  .field
    @extend .form-group

    float: none !important

    aside
      @extend .help-block

    &.kind
      @include span(4)

      // TODO: Figure out a way to not require this!
      padding-left: 0

    &.published
      @extend .checkbox

  input[type="text"],
  input[type="password"],
  textarea,
  select
    @extend .form-control

  input[type="submit"], button
    @extend .btn

  input[type="submit"]
    @extend .btn-primary

  button
    @extend .btn-info

form.login, form.register
  @extend .row

  fieldset
    @include span(6)

.CodeMirror
  @extend .form-control
  @include border-box

  display: block
  height: auto
  min-height: 400px
  width: 100%
  font-family: "Source Code Pro", monospace
  cursor: text

.CodeMirror-scroll
  min-height: 400px
  overflow-y: hidden
  overflow-x: auto

.CodeMirror-empty
  color: #888 !important

.CodeMirror-focused
  @extend .form-control:focus

table.submissions
  th, td
    text-overflow: ellipsis
    white-space: nowrap

  .kind
    width: 6%

  .title
    text-align: right
    width: 40%

  .writer, .submitted
    width: 12%

  .votes, .rating, .comments
    width: 10%

tr.submission
  &.published
    td.published
      @extend .glyphicon, .glyphicon-ok

  &:not(.published)
    td
      @extend .text-muted

span.highlight
  color: red
  font-weight: bold

.author
  @extend .lead

  &:before
    content: 'by '
    font-size: 90%

article
  margin-top: 20px
  margin-bottom: 60px
  font-family: "Lora", "Cambria", "Georgia", "Times New Roman", serif

  p
    white-space: pre-wrap

span.rating a
  @extend .badge

  color: #fff

  &:hover
    @extend .badge-info

span.current a
  background-color: $brand-success

form.new-comment
  @extend .well

  margin-top: 10px

button.leave-comment
  @extend .btn-info, .btn-mini

.comments
  margin-top: 20px

.comment
  @extend .media, .well

  img.profile-image
    @extend .media-object, .pull-left

  .content
    @extend .media-body

  .commenter
    @extend .media-heading

  .time
    @extend small, .text-muted, .pull-right

  &:nth-of-type(n+2)
    margin-top: 10px

  p:last-child
    margin-bottom: 0

.messages
  .message.new
    @extend tr.warning
    font-weight: bold

  .sender, .recipient
    width: 25%

  .subject
    width: 50%

  .subject a:empty:before
    @extend .text-muted
    content: "(no subject)"

a.reply
  @extend .btn, .btn-info

#theme-preview
  position: relative
  height: 600px
  width: 100%

  iframe
    @include fill-parent
    border: none
    overflow: hidden

  &:before
    @include fill-parent
    @include translucent(0.1)

    content: ''
    background-color: #fff
    z-index: 1

  &:after
    @include translucent(0.75)

    display: block
    position: absolute
    top: 50%
    left: 0
    right: 0
    height: 100px
    margin-top: -50px
    line-height: 100px
    content: 'Preview'

    background-color: #eee
    color: #000
    font-size: 64px
    text-align: center
    z-index: 2

.news-item
  @extend .panel, .panel-primary

  header h3
    @extend .panel-heading
    font-size: $font-size-large

    a
      @extend .btn-mini, .btn-default, .pull-right

  footer
    @extend .panel-footer

table.quotes
  .content
    width: 50%

  .source, .user
    width: 25%

.markdown-editor-with-preview
  @extend .row

  // Bootstrap tries to compensate by shifting the row left and having its children
  // shift back to the right. I'm un-compensating because otherwise the editor sits
  // off to the left.
  margin-left: 0

  .CodeMirror
    @include span(6)

  iframe
    @include span(6)
    height: 400px
    border: none
